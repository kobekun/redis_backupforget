
实例内存规格
	单个Key过大，有什么影响？
		在Redis中，如果单个Key过大，容易造成对于单个Key的操作占用带宽和内存资源过高，影响其他Key的操作。
	
	创建的缓存实例为什么可使用内存比实例规格少一些？
		Redis3.0、Memcached采用虚拟机部署，系统会占用小部分内存。Redis4.0/Redis5.0不会存在该问题。
	
	如何估算Redis内存占用量
		https://support.huaweicloud.com/dcs_faq/dcs-faq-0521001.html
	
	为什么实例实际可用内存比申请规格小而且已使用内存不为0？
		由于系统开销会占用部分资源，主备实例的持久化也需要一部分资源，所以Redis和Memcached实例创建后，缓存实例实际可用内存小于申请规格。除了用户存储数据外，Redis-server内部的buffer以及内部数据结构会占用一部分内存。所以缓存实例创建后，实例已使用内存量不为0。
	Redis默认的数据逐出策略是什么？
		volatile-lru：根据LRU（Least recently used，最近最少使用）算法尝试回收最少使用的键，但仅限于在过期集合的键，使得新添加的数据有空间存放。
		https://support.huaweicloud.com/dcs_faq/dcs-faq-0427031.html
	
	Redis实例经常内存满了但是key不多的原因
		可能原因：客户端缓冲区（output buffer）占用过多的内存空间。
		解决方案：Redis-cli客户端连接实例后，执行大key扫描命令：redis-cli --bigkeys，然后执行info，查看output buffer占用情况。
	
	什么是预留内存，如何配置预留内存？
		预留内存是一部分不能用来存储数据的内存空间，主要用于数据持久化，主备同步，执行实例备份等操作。
		配置名称：reserved-memory-percent
		监控中内存利用率统计是扣除预留内存的。
	
		支持的实例类型：确认4.0，5.0的配置参数是否有reserved-memory-percent ？？？
			Redis3.0 单机
			Redis3.0 主备
			Memcached 单机
			Memcached 主备
		如果您没有配置足够的预留内存（数据部分占用的内存容量过高），可能会导致：
			缓存实例操作速度变慢（系统启用swap，性能下降）。
			无法备份数据。
			数据无法及时主备同步。
			实例规格变更失败。
			可能会造成进程重启。

		配置预留内存操作步骤见：https://support.huaweicloud.com/dcs_faq/dcs-faq-210728001.html

	Redis实例支持的单个Key和Value数据大小是否有限制？
		Key的大小上限为512M。
		建议key的大小不超过1KB，这样既节约存储空间，也利于Redis进行检索。

		String类型的value值上限为512M。
		集合、链表、哈希等key类型，单个元素的value上限为512M。
		事实上，集合、链表、哈希都可以看成由String类型的key按照一定的映射关系组合而成。

		同时，请注意避免对大Value进行长时间高并发写入，这样会影响网络传输效率，也会增加redis-server的内部处理耗时，从而导致请求时延较大

	单个Key负载过大（热Key），有什么影响？
		在Redis中，如果单个Key的负载过大（热Key），容易造成单个Key的操作占用CPU或带宽资源过高，影响其他Key的操作。
	
	为了减少大Key和热Key过大，有什么使用建议？
		1、string类型控制在10KB以内，hash、list、set、zset元素尽量不超过5000。
		2、key的命名前缀为业务缩写，禁止包含特殊字符(比如空格、换行、单双引号以及其他转义字符)。
		3、Redis事务功能较弱，不建议过多使用。
		4、短连接性能差，推荐使用带有连接池的客户端。
		5、如果只是用于数据缓存，容忍数据丢失，建议关闭持久化。

	如何提前发现大Key和热Key？
		1、配置节点级别的内存利用率监控指标的告警
		如果某个节点存在大key，这个节点比其他节点内存使用率高很多，会触发告警，便于用户发现潜在的大key。
		2、配置节点级别的入网最大带宽、出网最大带宽、CPU利用率监控指标的告警
		如果某个节点存在热key，这个节点的带宽占用、CPU利用率都比其他节点高，该节点会容易触发告警，便于用户发现潜在热key。
		
		对于Redis 3.0实例，由于Redis3.0本身不支持热Key分析，推荐可以使用这种方法，帮助您发现热Key。
		配置监控告警的操作步骤，请参考 https://support.huaweicloud.com/usermanual-dcs/dcs-ug-190905001.html#section4

		DCS控制台提供了大Key和热Key的分析功能，具体使用，请参考 https://support.huaweicloud.com/usermanual-dcs/dcs-ug-190808001.html
	
	如何分析Redis3.0实例的热Key？
		https://support.huaweicloud.com/dcs_faq/dcs-faq-0521006.html
	
	Cluster集群实例容量和性能未达到瓶颈，但某个分片容量或性能已过载是什么原因？
		https://support.huaweicloud.com/dcs_faq/dcs-faq-0521002.html
	
	如何设置key的过期时间？
		可使用expire命令设置某个key过期时间，例如执行expire key1 100命令后，则key1在100秒后将过期。

	DCS删除过期key
		https://support.huaweicloud.com/dcs_faq/dcs-faq-210531002.html
	
	Redis实例CPU使用率达到100%的原因
		1、客户的业务负载过重，qps过高，导致CPU被用满。
		2、使用了keys等消耗资源的命令，高消耗资源的命令即时间复杂度为O(N)或更高的命令，通常情况下，命令时间复杂度越高，在执行时消耗的资源越高，这会导致CPU使用率超高，容易触发主备倒换。
		例如，使用了keys等消耗资源的命令，导致CPU超高，建议客户改成scan命令或者禁用keys命令。
		3、实例开启了AOF持久化功能，华为云Redis的AOF持久化一般在以下2种场景执行：
			a、业务不怎么繁忙时，固定在每天的凌晨3点进行AOF备份。所以容易出现这个时间点实例CPU使用率超高的现象。
			b、业务繁忙时，当业务量达到一定的程度，会自动触发后台AOF持久化。
			
			Redis的AOF持久化操作比较消耗CPU资源，如果在这种场景下，Redis读写业务量大，就出现CPU使用率超高的问题。
			如果客户没有需要用到持久化功能，建议将该功能关闭（请根据实际业务慎重操作，关闭持久化功能会导致数据丢失）。关闭操作：在实例详情页面，选择“配置参数”页签，将“appendonly”修改为“no”。

	DCS的Redis实例内存占用率略超过100%是什么情况？
		由于Redis自身运行机制（主从同步、延迟释放等），内存占用率可能出现略微超过100%的情况，此为正常情况，此时内存已经写满，用户需要考虑扩容，或者清理一些无用的数据。
	
	Redis实例内存使用率达到100%的原因
		1、实例没有设置过期时间，导致存储的数据太多。
		建议客户登录控制台，在“缓存分析”和“慢查询”页面，执行大Key扫描和慢查询。实例没有设置过期时间，存储数据太多，都会导致内存被占满。
		2、过期的key，由于redis惰性删除机制，不会主动清除已过期的key，导致过期键值一直存在内存中。
	
	集群实例启动时间过长是什么原因？
		可能原因：在集群实例启动过程中，实例节点内部会进行状态、数据的同步。如果在完成同步之前就持续写入较多的数据，会导致实例内部同步耗费较长时间，实例状态一直处于“启动中”。直到同步完成，集群实例状态才会切换到“运行中”。
		解决方案：建议等集群实例启动完成后，再恢复业务数据写入。	








































































